//FINAL GAME WITH CHTGPT + MYBOARD CODE
#include <stdio.h>
#include <string.h>

#define EMPTY ' '

void Title() {
    char text[] = "Tic Tac Toe";
    int line_width = 50;
    int len = strlen(text);
    int space = (line_width - len) / 2;

    for (int i = 0; i < space; i++) {
        printf(" ");
    }
    printf("%s\n\n", text);
    }

void Board(char board[10][10], int N) {
    // Print column headers
    printf("      ");           //prints 6 blank spaces before the colomn numbers start
    for (int col = 0; col < N; col++) {
        printf("%6d ", col);
    }  
    printf("\n");

    int HL_width = N;   // horizontal line width
    printf("  "); 
    for (int i = 0; i < HL_width; i++) {
        printf("------+");
    }
    printf("\n");

    // Print rows with separators
    for (int row = 0; row < N; row++) {
        printf("%3d |", row);
        for (int col = 0; col < N; col++) {
            printf("  %c   |", board[row][col]);
        }
        printf("\n");
        printf("  ");
        for (int i = 0; i < HL_width; i++) {
            printf("------+");
        }
        printf("\n");
    }
}
void drawBoard(char board[10][10],int N){
    Board(board,N);
}

int checkWinner(char board[10][10], int N, char symbol) {
    int i, j;

    // Check rows
    for (i = 0; i < N; i++) {
        int count = 0;
        for (j = 0; j < N; j++) {
            if (board[i][j] == symbol) count++;
        }
        if (count == N) return 1;
    }

    // Check columns
    for (j = 0; j < N; j++) {
        int count = 0;
        for (i = 0; i < N; i++) {
            if (board[i][j] == symbol) count++;
        }
        if (count == N) return 1;
    }

    // Check main diagonal
    int count = 0;
    for (i = 0; i < N; i++) {
        if (board[i][i] == symbol) count++;
    }
    if (count == N) return 1;

    // Check anti-diagonal
    count = 0;
    for (i = 0; i < N; i++) {
        if (board[i][N - 1 - i] == symbol) count++;
    }
    if (count == N) return 1;

    return 0;
}

int main() {
    int N;
    Title();

    printf("Enter board size N (3 <= N <= 10): ");
    scanf("%d", &N);

    if (N < 3 || N > 10) {
        printf("Invalid size!\n");
        return 0;
    }

    char board[10][10];
    int i, j;

    // Initialize board
    for (i = 0; i < N; i++) {
        for (j = 0; j < N; j++) {
            board[i][j] = EMPTY;
        }
    }

    int moves = 0, maxMoves = N * N;
    char currentPlayer = 'X';

    while (1) {
        Board(board, N);

        int row, col;
        printf("Player %c, enter row and column: ", currentPlayer);
        scanf("%d %d", &row, &col);

        if (row < 0 || row >= N || col < 0 || col >= N || board[row][col] != EMPTY) {
            printf("Invalid move, try again.\n");
            continue;
        }

        board[row][col] = currentPlayer;
        moves++;

        if (checkWinner(board, N, currentPlayer)) {
            drawBoard(board, N);
            printf("Player %c wins!\n", currentPlayer);
            break;
        }

        if (moves == maxMoves) {
            Board(board, N);
            printf("It's a draw!\n");
            break;
        }

        if (currentPlayer == 'X'){
            currentPlayer = 'O';
        }
        else{
            currentPlayer = 'X';
        }
    }

    return 0;
}